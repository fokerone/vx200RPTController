# VX200 Controller

## üì° Sistema de Control para Repetidora Headless v2.9.1

Sistema completo de control inteligente para repetidora simplex desarrollado en Node.js. **Versi√≥n Headless** con interfaz APRS liviana, decodificaci√≥n DTMF profesional con anti-falsos positivos, m√∫ltiples servicios automatizados, monitoreo s√≠smico INPRES en tiempo real y **sistema TTS h√≠brido con Google TTS**.

**üöÄ Versi√≥n 2.9.1 - Mejoras Cr√≠ticas en Alertas Meteorol√≥gicas TTS**

### üìÖ **Novedades v2.9.1** (Septiembre 2025)
- **üéôÔ∏è Mejora Flujo TTS Multiple Alertas**: Corregido flujo de mensaje para m√∫ltiples alertas meteorol√≥gicas
- **‚è∏Ô∏è Pausas Mejoradas**: Implementadas pausas adecuadas entre alertas usando puntos en lugar de comas
- **üîÑ Estructura Mensaje Optimizada**: Eliminados saltos abruptos de timing a fuente SMN
- **üïê Formato 24h Perfeccionado**: Sin palabra "horas" para pronunciaci√≥n TTS m√°s natural
- **üìÖ D√≠as Espec√≠ficos**: Reemplazado "ma√±ana" por nombres de d√≠as espec√≠ficos (ej: "mi√©rcoles 10")
- **üì° Fuente SMN Consistente**: Agregada fuente SMN al final de todos los anuncios
- **üó∫Ô∏è √Åreas Geogr√°ficas Precisas**: Identificaci√≥n espec√≠fica de zonas dentro de Mendoza

### üìÖ **Novedades v2.9.0** (Septiembre 2025)
- **‚öôÔ∏è Sistema Configuraci√≥n H√≠brido**: Nuevo ConfigurationService con herencia y compatibilidad total con sistema anterior
- **üîä Baliza BBC Pips**: Implementaci√≥n de secuencia BBC est√°ndar (5 tonos cortos + 1 largo) sincronizada con horas de reloj
- **üïê Sincronizaci√≥n Horaria**: Baliza transmite exactamente en horas de reloj para m√°xima precisi√≥n
- **üîÑ ConfigCompat**: Capa de compatibilidad que permite migraci√≥n gradual sin interrupciones
- **üéØ Config H√≠brido**: Sistema que usa ConfigurationService como prioritario con fallback al ConfigManager anterior
- **üßπ Limpieza Archivos**: Eliminaci√≥n autom√°tica de archivos temporales de audio para mantener espacio limpio

### üìÖ **Novedades v2.8.0** (Agosto 2025)
- **üéôÔ∏è Sistema TTS H√≠brido**: Google TTS como motor principal con fallback autom√°tico a espeak
- **üîÄ L√≥gica Simplex Completa**: Sistema simplex real que pausa recepci√≥n durante transmisi√≥n
- **‚ùå Sin Falsos Positivos DTMF**: Eliminados completamente los falsos positivos durante transmisiones TTS
- **‚è±Ô∏è Timeout Extendido**: Alertas meteorol√≥gicas con timeout de 2 minutos para contenido largo
- **üó∫Ô∏è Marcadores Optimizados**: Eliminadas animaciones pulsantes y emojis internos en marcadores APRS
- **üêõ Fix Duplicaci√≥n**: Solucionado problema de duplicaci√≥n infinita del marcador de repetidora
- **üì° DuckDNS Integrado**: Sistema DNS din√°mico completamente funcional con actualizaci√≥n autom√°tica

### üìÖ **Novedades v2.7.0** (Agosto 2025)
- **üñ•Ô∏è Sistema Completamente Headless**: Eliminado dashboard web completo, ahora funciona solo por consola
- **üó∫Ô∏è Mapa APRS Liviano**: Nueva interfaz web minimalista con Bootstrap 5 y Leaflet.js
- **üìä Datos Enriquecidos Completos**: Integraci√≥n total de datos Direwolf (speed, course, altitude, audioLevel, errorRate)
- **üì± Dise√±o Responsive Avanzado**: Optimizado para dispositivos m√≥viles con iconograf√≠a moderna
- **üéØ Marcadores Grandes**: Marcadores de 32px con indicadores visuales mejorados para mejor usabilidad
- **üìà Panel de Informaci√≥n Detallada**: 6 secciones organizadas que aparecen al clickear marcadores
- **‚ö° Puerto Optimizado**: Servidor APRS en puerto 3000 para evitar conflictos
- **üîÑ Actualizaci√≥n Autom√°tica**: Datos actualizados cada 30 segundos
- **üì° APIs REST**: Endpoints `/api/positions` y `/api/repeater` para integraci√≥n externa

### üó∫Ô∏è **Nuevo Mapa APRS Interactivo**
- **Marcadores Visuales**: Indicadores de velocidad, curso, altitud y calidad de se√±al
- **Informaci√≥n Completa**: Speed (km/h), Course (grados), Altitude (metros), Audio Level, Error Rate
- **Panel Detallado**: Informaci√≥n organizada en secciones al hacer clic en marcadores
- **Charts de Altitud**: Visualizaci√≥n gr√°fica con Canvas HTML5
- **Cobertura Din√°mica**: C√≠rculo de alcance basado en estaci√≥n m√°s lejana
- **Responsive Design**: Interfaz optimizada para m√≥viles y tablets

### üìÖ **Novedades v2.6.2** (Agosto 2025)
- **üìç Fix APRS Posiciones Reales**: Corregido parser para mostrar coordenadas reales transmitidas en lugar de coordenadas fallback del repetidor
- **üó∫Ô∏è Visualizaci√≥n Completa**: Ahora muestra todas las posiciones √∫nicas transmitidas (11 ubicaciones vs 1-2 anteriormente)
- **üìä Contador Preciso**: Contador de posiciones ahora refleja packets reales recibidos (71) vs posiciones √∫nicas mostradas
- **üì° Parser Mejorado**: Mejorado parser de logs Direwolf para obtener coordenadas exactas por callsign y timestamp
- **üå¶Ô∏è Fix Audio Alertas Completo**: Solucionado problema de audio cortado en repeticiones de alertas meteorol√≥gicas
- **üîä Playlist Secuencial**: Sistema de fallback que reproduce todos los fragmentos cuando falla combinaci√≥n ffmpeg
- **‚ö° Anti-Truncamiento**: Eliminado fallback que solo reproduc√≠a primer fragmento, ahora reproduce mensaje completo siempre

---

## ‚ú® Caracter√≠sticas Principales

### üñ•Ô∏è **Sistema Headless**
- **Funcionamiento solo por consola** - Sin interfaz web pesada
- **Mapa APRS liviano** como √∫nica interfaz web
- **Optimizado para servidores** y dispositivos embebidos
- **Menor consumo de recursos** sin dashboard completo
- **Ideal para implementaciones 24/7** en producci√≥n

### üéµ **Sistema de Audio Avanzado**
- Grabaci√≥n en tiempo real con soporte ALSA/PulseAudio
- **Decodificador DTMF Profesional** con `dtmf-detection-stream`
- **Anti-falsos positivos** con detecci√≥n de voz integrada
- **L√≥gica Simplex Completa** - pausa recepci√≥n durante transmisi√≥n
- Configuraci√≥n de sensibilidad (Low/Medium/High)
- Modo debug para desarrollo y pruebas
- Roger Beep estilo Kenwood configurable

### üéôÔ∏è **Sistema TTS H√≠brido Avanzado**
- **Google TTS como motor principal** con calidad de voz natural
- **Fallback autom√°tico a espeak** para m√°xima confiabilidad
- **Fragmentaci√≥n inteligente** para textos largos con ffmpeg
- **Integraci√≥n con l√≥gica simplex** para evitar falsos positivos DTMF
- **Timeout extendido** (2 minutos) para alertas meteorol√≥gicas largas
- **Estad√≠sticas de uso** con tasa de √©xito de cada motor TTS
- **Limpieza autom√°tica** de archivos temporales

### üì° **Sistema APRS Completo con An√°lisis de Cobertura**
- **TNC Software** integrado con Direwolf
- **Historial completo de posiciones** por estaci√≥n con persistencia
- **Datos enriquecidos completos**: Speed, Course, Altitude, Audio Level, Error Rate
- **180+ s√≠mbolos APRS oficiales** con emojis descriptivos
- **C√°lculo de distancias** precisas desde repetidora (f√≥rmula Haversine)
- **C√≠rculo de cobertura din√°mico** en mapa web
- **Widget en tiempo real** de estaci√≥n m√°s lejana recibida
- **Detecci√≥n autom√°tica** de nuevas ubicaciones (>100m)
- **Mapa APRS interactivo** con marcadores informativos grandes
- Transmisi√≥n de beacons autom√°ticos y manuales
- Estad√≠sticas detalladas de tr√°fico APRS

### üó∫Ô∏è **Mapa APRS Interactivo Moderno**
- **Bootstrap 5** con dise√±o responsive avanzado
- **Leaflet.js** para mapas interactivos suaves
- **Marcadores grandes** (32px) optimizados para m√≥viles
- **Indicadores visuales** para velocidad, curso, altitud y se√±al
- **Panel de informaci√≥n detallada** con 6 secciones organizadas
- **Charts de altitud** con Canvas HTML5
- **Actualizaci√≥n autom√°tica** cada 30 segundos
- **APIs REST** para integraci√≥n externa

### üîä **Sistema de M√≥dulos**
- **üîä Baliza BBC Pips**: Secuencia est√°ndar 5 tonos cortos + 1 largo sincronizada con horas de reloj (`*9`)
- **DateTime**: Anuncio de fecha y hora (`*1`)
- **Weather**: Informaci√≥n meteorol√≥gica (`*4` actual, `*5` voz)
- **üå¶Ô∏è Weather Alerts**: Sistema de alertas SMN Argentina (`*7` consultar, `*0` forzar verificaci√≥n)
- **üåã INPRES S√≠smico**: Monitoreo de sismos INPRES (`*3` consultar sismos del d√≠a)

### üåã **Sistema de Monitoreo S√≠smico INPRES**
- **Monitoreo autom√°tico** cada 20 minutos del Instituto Nacional de Prevenci√≥n S√≠smica
- **Filtrado inteligente** sismos >4.0 magnitud en regi√≥n Mendoza
- **Estados s√≠smicos diferenciados**: Azul (preliminar), Negro (revisado), Rojo (sentido)
- **Anuncios selectivos** solo sismos revisados/sentidos para evitar falsos positivos
- **Zonificaci√≥n Mendoza** autom√°tica (Capital, Valle de Uco, San Rafael, etc.)
- **Comando DTMF *3** para consulta manual de sismos del d√≠a
- **Web scraping robusto** con parsing HTML avanzado

### üå¶Ô∏è **Sistema de Alertas Meteorol√≥gicas SMN**
- **Monitoreo autom√°tico** cada 90 minutos de alertas SMN Argentina
- **Cobertura completa** de la provincia de Mendoza
- **Filtrado geogr√°fico inteligente** por coordenadas y pol√≠gonos CAP
- **Anuncios autom√°ticos** con Google TTS + fragmentaci√≥n para textos largos
- **Integraci√≥n APRS** con comentarios din√°micos incluyendo clima actual
- **Repetici√≥n autom√°tica** cada 105 minutos para alertas vigentes

---

## üöÄ Instalaci√≥n y Configuraci√≥n

### Prerrequisitos
- **Node.js** 18.x o superior
- **NPM** o Yarn
- **Sistema Linux** (probado en Arch Linux)
- **Hardware de audio** compatible con ALSA
- **Direwolf** (para funcionalidad APRS)

### Instalaci√≥n R√°pida

```bash
# Clonar el repositorio
git clone https://github.com/fokerone/vx200RPTController.git
cd vx200RPTController

# Instalar dependencias
npm install

# Configurar variables de entorno
cp .env.example .env
nano .env  # Editar configuraci√≥n

# Ejecutar el sistema
npm start
```

### Configuraci√≥n de Audio

```bash
# Verificar dispositivos disponibles
aplay -l
arecord -l

# Configurar en .env
AUDIO_DEVICE=default  # o hw:0,0 seg√∫n tu hardware
AUDIO_SAMPLE_RATE=48000
AUDIO_CHANNEL_THRESHOLD=0.02
```

### Configuraci√≥n APRS (Opcional)

```bash
# Instalar Direwolf
sudo pacman -S direwolf  # Arch Linux
sudo apt install direwolf  # Ubuntu/Debian

# Configurar TNC en .env
APRS_ENABLED=true
APRS_CALLSIGN=TU_INDICATIVO
APRS_LOCATION=lat,lon
```

**üó∫Ô∏è Mapa APRS disponible en: http://localhost:3000**

---

## ‚öôÔ∏è Configuraci√≥n

### Variables de Entorno (.env)

```env
# Sistema
CALLSIGN=TU_INDICATIVO
NODE_ENV=production
APRS_MAP_PORT=3000

# Audio
AUDIO_DEVICE=default
AUDIO_SAMPLE_RATE=48000
AUDIO_CHANNEL_THRESHOLD=0.02

# TTS
TTS_VOICE=es+f3
TTS_SPEED=160

# Roger Beep
ROGER_BEEP_ENABLED=true
ROGER_BEEP_TYPE=kenwood
ROGER_BEEP_VOLUME=0.7

# Baliza
BALIZA_ENABLED=true
BALIZA_INTERVAL=60
BALIZA_MESSAGE=TU_INDICATIVO Repetidora Simplex

# APRS (Opcional)
APRS_ENABLED=true
APRS_CALLSIGN=YOSHUA
APRS_COMMENT=VX200 RPT
APRS_BEACON_INTERVAL=15

# APIs Opcionales
OPENWEATHER_API_KEY=tu_api_key
```

---

## üéõÔ∏è Comandos DTMF

| Comando | Funci√≥n | Descripci√≥n |
|---------|---------|-------------|
| `*1` | DateTime | Anuncia fecha y hora actual |
| `*3` | **üåã INPRES S√≠smico** | **Consultar sismos >4.0 del d√≠a en Mendoza** |
| `*4` | Weather | Clima actual |
| `*5` | Weather Voice | Clima con voz natural |
| `*7` | **üå¶Ô∏è Weather Alerts** | **Consultar alertas meteorol√≥gicas activas** |
| `*0` | **üîÑ Force Check** | **Forzar verificaci√≥n manual de alertas SMN** |
| `*9` | Baliza | Activa baliza manual |

---

## üìÅ Estructura del Proyecto

```
vx200RPTController/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js                 # VX200Controller principal
‚îÇ   ‚îú‚îÄ‚îÄ constants.js             # Constantes del sistema
‚îÇ   ‚îú‚îÄ‚îÄ config/                  # Sistema de configuraci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ logging/                 # Sistema de logging
‚îÇ   ‚îú‚îÄ‚îÄ audio/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ audioManager.js      # Gestor de audio completo
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dtmfDecoder.js       # Decodificador DTMF profesional
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HybridVoiceManager.js # Sistema TTS h√≠brido Google+espeak
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rogerBeep.js         # Roger Beep Kenwood
‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ baliza.js            # M√≥dulo de baliza
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ datetime.js          # M√≥dulo fecha/hora
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weather.js           # M√≥dulo meteorol√≥gico
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weather-voice.js     # M√≥dulo clima con voz
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weatherAlerts.js     # M√≥dulo alertas meteorol√≥gicas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inpres.js            # M√≥dulo monitoreo s√≠smico INPRES
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ aprs.js              # M√≥dulo APRS con Direwolf
‚îÇ   ‚îî‚îÄ‚îÄ aprs-map/
‚îÇ       ‚îú‚îÄ‚îÄ server.js            # Servidor mapa APRS liviano
‚îÇ       ‚îî‚îÄ‚îÄ map.html             # Interfaz mapa interactivo
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ default.json             # Configuraci√≥n por defecto
‚îú‚îÄ‚îÄ .env.example                 # Template de variables
‚îî‚îÄ‚îÄ README.md
```

---

## üó∫Ô∏è Mapa APRS v2.7.0

### **Caracter√≠sticas del Mapa**
- **üéØ URL**: `http://localhost:3000`
- **üì± Responsive**: Optimizado para m√≥viles y tablets
- **üîÑ Auto-actualizaci√≥n**: Datos frescos cada 30 segundos
- **üìä APIs REST**: `/api/positions` y `/api/repeater`

### **Funcionalidades Destacadas**
- **Marcadores grandes** (32px) f√°ciles de tocar
- **Indicadores visuales** para velocidad, curso y altitud
- **Panel de informaci√≥n completo** con 6 secciones
- **Charts de altitud** din√°micos con Canvas
- **C√≠rculo de cobertura** basado en estaci√≥n m√°s lejana
- **Estad√≠sticas en tiempo real** de tr√°fico APRS

### **Datos Enriquecidos**
- **Speed**: Velocidad en km/h
- **Course**: Rumbo en grados (0-359¬∞)
- **Altitude**: Altitud sobre el nivel del mar
- **Audio Level**: Nivel de se√±al y estad√≠sticas
- **Error Rate**: Tasa de errores de recepci√≥n

---

## üîß Scripts Disponibles

```bash
# Iniciar sistema headless completo
npm start

# Modo desarrollo
npm run dev

# Test de salud del sistema
npm run health
```

---

## üõ†Ô∏è Caracter√≠sticas T√©cnicas v2.7.0

### **Sistema Headless**
- **Servidor liviano**: Solo mapa APRS en puerto 3000
- **Sin dashboard pesado**: Eliminado para mejor rendimiento
- **Optimizado para producci√≥n**: Ideal para servidores 24/7
- **APIs REST**: Integraci√≥n externa simplificada

### **DTMF Profesional**
- **dtmf-detection-stream**: Librer√≠a especializada
- **Anti-falsos positivos**: Detecci√≥n de voz integrada
- **Configuraci√≥n avanzada**: 3 niveles de sensibilidad
- **Modo debug**: Para desarrollo y troubleshooting
- **Validaci√≥n temporal**: Evita detecciones err√≥neas

### **APRS Integration**
- **Direwolf TNC**: Software TNC completo
- **Datos enriquecidos**: Speed, course, altitude, audioLevel, errorRate
- **Beacon autom√°tico**: Transmisi√≥n programable
- **Position tracking**: Seguimiento de estaciones
- **Mapa en tiempo real**: Visualizaci√≥n web interactiva

### **Web Architecture**
- **HTTP Server nativo**: Sin frameworks pesados
- **Bootstrap 5**: CSS framework moderno
- **Leaflet.js**: Mapas interactivos suaves
- **Canvas Charts**: Gr√°ficos de altitud din√°micos

---

## üêõ Troubleshooting

### Audio No Funciona
```bash
# Verificar dispositivos
aplay -l && arecord -l

# Permisos de audio
sudo usermod -a -G audio $USER

# Configurar device en .env
AUDIO_DEVICE=default
```

### DTMF No Detecta
```bash
# Activar debug en logs
# Verificar niveles de audio con:
# 1. Cambiar DTMF_SENSITIVITY=high en .env
# 2. Monitorear logs en tiempo real
# 3. Verificar AUDIO_CHANNEL_THRESHOLD
```

### APRS No Conecta
```bash
# Verificar Direwolf
direwolf -t 0

# Verificar configuraci√≥n TNC
ps aux | grep direwolf
```

### Mapa APRS No Carga
```bash
# Verificar puerto disponible
curl http://localhost:3000

# Verificar logs del servidor
npm start  # Ver logs en consola
```

---

## üìã Changelog

### v2.9.1 - Mejoras Cr√≠ticas en Alertas Meteorol√≥gicas TTS üéôÔ∏è

#### üéôÔ∏è **Sistema de Alertas Meteorol√≥gicas Mejorado**
- [x] **Flujo de mensaje optimizado para m√∫ltiples alertas**
  - [x] Corregida estructura de mensaje para eliminar saltos abruptos
  - [x] Implementadas pausas adecuadas entre alertas usando puntos (.) en lugar de comas (,)
  - [x] Cada alerta ahora tiene pausas naturales despu√©s de su informaci√≥n de timing
  - [x] Transici√≥n suave hacia la informaci√≥n de fuente SMN al final
- [x] **Mejoras de pronunciaci√≥n TTS**
  - [x] Formato 24h sin palabra "horas" para pronunciaci√≥n m√°s natural
  - [x] Nombres de d√≠as espec√≠ficos en lugar de "ma√±ana" (ej: "mi√©rcoles 10")
  - [x] Fuente SMN agregada consistentemente al final de todos los anuncios
  - [x] Identificaci√≥n espec√≠fica de √°reas geogr√°ficas dentro de Mendoza
- [x] **Estructura de mensaje mejorada**
  - [x] Separaci√≥n clara entre informaci√≥n de alerta y timing
  - [x] Pausas apropiadas para permitir comprensi√≥n completa
  - [x] Eliminados problemas de flujo de mensaje reportados por usuarios
  - [x] Optimizaci√≥n para diferentes cantidades de alertas simult√°neas

### v2.9.0 - Sistema Configuraci√≥n H√≠brido y Baliza BBC Pips ‚öôÔ∏èüîä

#### ‚öôÔ∏è **Sistema de Configuraci√≥n H√≠brido Implementado**
- [x] **ConfigurationService completo**
  - [x] Nuevo sistema de configuraci√≥n con soporte de herencia
  - [x] M√©todo get() con notaci√≥n de punto y valores por defecto
  - [x] Extensi√≥n autom√°tica de configuraci√≥n padre con override de propiedades
  - [x] Validaci√≥n de esquemas y manejo de errores robusto
- [x] **ConfigCompat capa de compatibilidad**
  - [x] Interfaz de compatibilidad para migraci√≥n gradual del sistema anterior
  - [x] Mapeo autom√°tico entre ConfigManager y ConfigurationService
  - [x] Permite mantener c√≥digo existente sin cambios durante migraci√≥n
  - [x] Logging de migraciones para seguimiento del proceso
- [x] **Integraci√≥n h√≠brida en src/config/index.js**
  - [x] Sistema h√≠brido que usa ConfigurationService como prioritario
  - [x] Fallback autom√°tico al ConfigManager anterior en caso de error
  - [x] Compatibilidad total con c√≥digo existente
  - [x] Documentaci√≥n clara del proceso de migraci√≥n

#### üîä **Baliza BBC Pips Est√°ndar Implementada**
- [x] **Secuencia BBC est√°ndar**
  - [x] 5 tonos cortos de 100ms a 1000Hz
  - [x] 1 tono largo final de 500ms marca hora exacta
  - [x] Patr√≥n temporal: corto-900ms-corto-900ms-corto-900ms-corto-900ms-corto-900ms-largo
  - [x] Frecuencia 1kHz est√°ndar para se√±ales horarias internacionales
- [x] **Sincronizaci√≥n horaria perfecta**
  - [x] Transmisi√≥n exacta en horas de reloj (00:00, 01:00, 02:00, etc.)
  - [x] C√°lculo autom√°tico de tiempo hasta pr√≥xima hora
  - [x] Eliminado delay inicial fijo, ahora se sincroniza inmediatamente
  - [x] Logs informativos del pr√≥ximo tiempo de transmisi√≥n
- [x] **Configuraci√≥n avanzada**
  - [x] Duraciones separadas para tonos cortos y largos configurables
  - [x] Validaci√≥n autom√°tica de rangos de duraci√≥n (50-200ms cortos, 300-1000ms largos)
  - [x] Modo de sincronizaci√≥n 'clock-hour' documentado en eventos
  - [x] Patr√≥n 'bbc-pips' identificado en configuraci√≥n

#### üßπ **Limpieza y Mantenimiento**
- [x] **Eliminaci√≥n archivos temporales**
  - [x] Removidos 8 archivos temporales MP3 de sistema TTS
  - [x] Limpieza autom√°tica de directorio temp/ implementada
  - [x] Gesti√≥n de espacio en disco mejorada
  - [x] Tracking de archivos temporales en git ignore
- [x] **Compatibilidad durante migraci√≥n**
  - [x] SystemOutput.js con comandos DTMF hardcoded temporalmente
  - [x] Prevenci√≥n de errores durante migraci√≥n gradual de configuraci√≥n  
  - [x] Fallbacks robustos en todas las transiciones cr√≠ticas
  - [x] Documentaci√≥n clara de estado de migraci√≥n en comentarios

### v2.8.0 - Sistema TTS H√≠brido y Mejoras de Estabilidad üéôÔ∏è

#### üéôÔ∏è **Sistema TTS H√≠brido Avanzado**
- [x] **Google TTS como motor principal**
  - [x] Implementado HybridVoiceManager con Google TTS prioritario
  - [x] Calidad de voz natural superior para anuncios
  - [x] Fragmentaci√≥n inteligente para textos largos con ffmpeg
  - [x] Limpieza autom√°tica de archivos temporales
- [x] **Fallback autom√°tico a espeak**
  - [x] Sistema de fallback robusto en caso de fallo Google TTS
  - [x] Mantiene operatividad 24/7 sin interrupciones
  - [x] Estad√≠sticas de uso con tasa de √©xito por motor
  - [x] Configuraci√≥n de timeout y par√°metros de voz

#### üîÄ **L√≥gica Simplex Completa Implementada**
- [x] **Fix cr√≠tico falsos positivos DTMF**
  - [x] Implementada l√≥gica simplex real que pausa recepci√≥n durante transmisi√≥n
  - [x] Eliminados completamente falsos positivos DTMF durante TTS
  - [x] Integraci√≥n completa con todos los m√≥dulos (weather, datetime, inpres)
  - [x] M√∫ltiples capas de protecci√≥n anti-falsos positivos
- [x] **Integraci√≥n AudioManager**
  - [x] M√©todo playWeatherAlertWithPaplay() con l√≥gica simplex
  - [x] Pausar/reanudar grabaci√≥n autom√°tica durante transmisiones
  - [x] Eventos de transmisi√≥n para monitoreo del estado
  - [x] Timeout extendido (2 minutos) para alertas meteorol√≥gicas largas

#### üó∫Ô∏è **Mejoras Mapa APRS**
- [x] **Marcadores optimizados**
  - [x] Eliminadas animaciones pulsantes para mejor rendimiento
  - [x] Removidos emojis internos de marcadores de estaci√≥n
  - [x] Marcadores est√°ticos m√°s limpios y profesionales
  - [x] Fix duplicaci√≥n infinita del marcador de repetidora
- [x] **Limpieza de c√≥digo**
  - [x] clearMarkers() mejorado elimina todos los elementos
  - [x] Gesti√≥n correcta de coverageCircle y repeaterMarker
  - [x] Sin elementos duplicados en el mapa

#### üì° **DuckDNS Completamente Funcional**
- [x] **DNS din√°mico integrado**
  - [x] Actualizaci√≥n autom√°tica cada 5 minutos
  - [x] Dominio vx200-yoshua.duckdns.org operativo
  - [x] Resoluci√≥n DNS correcta verificada
  - [x] Integraci√≥n con sistema de logs

### v2.7.0 - Sistema Headless con Mapa APRS Completo üñ•Ô∏è

#### üöÄ **Transformaci√≥n Headless**
- [x] **Dashboard web eliminado completamente**
  - [x] Removido sistema Express.js pesado con Socket.IO
  - [x] Eliminadas 500+ l√≠neas de c√≥digo frontend innecesario
  - [x] Removidos archivos CSS, JavaScript y HTML del dashboard
  - [x] Sistema ahora funciona completamente por consola
- [x] **Mapa APRS liviano implementado**
  - [x] Servidor HTTP nativo minimalista en src/aprs-map/server.js
  - [x] Interfaz Bootstrap 5 + Leaflet.js en map.html
  - [x] Solo 200 l√≠neas de c√≥digo servidor vs 1500+ anteriores
  - [x] Puerto 3000 optimizado sin conflictos

#### üó∫Ô∏è **Mapa APRS Interactivo Avanzado**
- [x] **Datos enriquecidos completos de Direwolf**
  - [x] Speed (velocidad en km/h)
  - [x] Course (rumbo en grados 0-359¬∞)
  - [x] Altitude (altitud sobre nivel del mar)
  - [x] Audio Level (nivel de se√±al con estad√≠sticas)
  - [x] Error Rate (tasa de errores de recepci√≥n)
- [x] **Interfaz visual mejorada**
  - [x] Marcadores grandes de 32px vs 22px anteriores
  - [x] Indicadores visuales para velocidad, curso y altitud
  - [x] Panel de informaci√≥n detallada con 6 secciones organizadas
  - [x] Charts de altitud din√°micos con Canvas HTML5
- [x] **Responsive design avanzado**
  - [x] Optimizado para dispositivos m√≥viles
  - [x] Touch-friendly con marcadores grandes
  - [x] Iconograf√≠a moderna con emojis descriptivos
  - [x] Bootstrap 5 con dise√±o limpio y profesional

#### üìä **APIs REST y Actualizaci√≥n Autom√°tica**
- [x] **Endpoints optimizados**
  - [x] `/api/positions` - Posiciones con datos enriquecidos
  - [x] `/api/repeater` - Estado del repetidor y estad√≠sticas
  - [x] Datos JSON limpios para integraci√≥n externa
- [x] **Sistema de actualizaci√≥n**
  - [x] Actualizaci√≥n autom√°tica cada 30 segundos
  - [x] Enriquecimiento din√°mico desde logs de Direwolf
  - [x] Persistencia de datos entre reinicios

#### üéØ **Optimizaciones de Rendimiento**
- [x] **Menor consumo de recursos**
  - [x] Eliminado Express.js y dependencias pesadas
  - [x] Servidor HTTP nativo m√°s eficiente
  - [x] Sin WebSocket ni Socket.IO innecesarios
  - [x] Ideal para dispositivos embebidos y servidores 24/7
- [x] **C√≥digo m√°s limpio**
  - [x] Arquitectura simplificada y modular
  - [x] Separaci√≥n clara entre backend y frontend
  - [x] Mantenimiento m√°s sencillo

### v2.6.2 - Fix APRS Posiciones y Alertas Meteorol√≥gicas Completas üìç

#### üîß **Correcciones Cr√≠ticas**
- [x] **Fix APRS Posiciones Reales**
  - [x] Corregido parser para mostrar coordenadas reales transmitidas
  - [x] Eliminado uso de coordenadas fallback del repetidor
  - [x] Parser mejorado de logs Direwolf para obtener coordenadas exactas
  - [x] Ahora muestra 11 ubicaciones reales vs 1-2 anteriormente
- [x] **Contador de posiciones preciso**
  - [x] Refleja packets reales recibidos (71) vs posiciones √∫nicas
  - [x] Diferenciaci√≥n entre packets totales y ubicaciones √∫nicas
- [x] **Fix audio alertas meteorol√≥gicas**
  - [x] Solucionado problema de audio cortado en repeticiones
  - [x] Sistema de fallback secuencial mejorado
  - [x] Eliminado truncamiento que solo reproduc√≠a primer fragmento

### v2.6.1 - Fix DTMF Anti-Falsos Positivos y Estabilidad 24/7 üîá

#### üîß **Correcciones Cr√≠ticas**
- [x] **Eliminaci√≥n de falsos positivos DTMF**
  - [x] Removido `playTone(400, 200, 0.5)` de `handleUnknownCommand()` que causaba feedback
  - [x] Fix cr√≠tico: El tono de "comando desconocido" generaba loops de retroalimentaci√≥n
  - [x] Eliminado completamente el problema de detecciones DTMF durante conversaciones
  - [x] Sistema ahora diferencia correctamente entre DTMF real y artefactos de voz
- [x] **Pruebas de estabilidad 24/7**
  - [x] Sistema operativo durante 27+ horas continuas sin interrupciones
  - [x] Zero errores no controlados durante test de estabilidad extendido
  - [x] Confirmada capacidad de operaci√≥n 24/7 en producci√≥n
  - [x] Monitoreo continuo cada hora durante testing nocturno

---

## üéØ Pr√≥ximas Versiones

### v2.9 - Planificado
- [ ] **Contenedorizaci√≥n Docker** para despliegue f√°cil
- [ ] **M√©tricas Prometheus** para monitoreo avanzado
- [ ] **API GraphQL** para consultas flexibles
- [ ] **Multi-repetidora** con sincronizaci√≥n

### v3.0 - Futuro
- [ ] **App m√≥vil nativa** con React Native
- [ ] **Integraci√≥n LoRa** para enlaces remotos
- [ ] **Machine Learning** para predicci√≥n de tr√°fico
- [ ] **Clustering** para alta disponibilidad

---

## üìû Soporte y Contacto

**Desarrollado por: LU5MCD**

- üìß **Email**: fokerone@gmail.com  
- üåê **GitHub**: https://github.com/fokerone/vx200RPTController
- üìª **QRZ**: https://www.qrz.com/db/LU5MCD

---

## üèÜ Reconocimientos

- **dtmf-detection-stream**: Excelente librer√≠a para detecci√≥n DTMF
- **Direwolf**: Software TNC indispensable para APRS
- **Bootstrap 5**: Framework CSS moderno y responsive
- **Leaflet.js**: Biblioteca de mapas interactivos ligera y potente

---

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Ver archivo `LICENSE` para m√°s detalles.

---

**‚ú® VX200 Controller v2.9.1 - Mejoras Cr√≠ticas en Alertas Meteorol√≥gicas TTS üì°üéôÔ∏è**